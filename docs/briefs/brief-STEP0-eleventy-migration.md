# Brief STEP 0 — Migrate to Eleventy Static Site Generator
## The Data Accuracy Foundation
**Priority:** Do this before Brief 0.1. Everything else depends on it.  
**Estimated time:** 1 full Claude Code day (3–4 sessions)  
**Risk level:** High — this touches every file. Branch strategy is mandatory.  
**Generated by:** Manus AI — February 24, 2026

---

## Why This Must Happen First

The current site is pure static HTML. Every page is a standalone `.html` file with data hardcoded directly in the markup. This creates three compounding problems:

**Problem 1 — SEO risk from client-side data loading.** If we build the data layer as JavaScript that fetches JSON at runtime (the approach I originally described), Google has to execute that JavaScript to see the content. Google can do this, but it adds a "second wave" crawl delay of days to weeks. During that window, the page appears empty to Google. For a site whose entire growth strategy depends on SEO, this is an unacceptable risk.

**Problem 2 — Every design change requires touching 60+ files.** The navigation, footer, and shared components are copy-pasted into every HTML file. When we update the nav in Brief 0.6, Claude Code has to find-and-replace across 60+ files. This is error-prone and slow. One missed file means an inconsistent nav on a live page.

**Problem 3 — No scalable path to 100+ pages.** The content roadmap calls for 10 tool pages → 30 tool pages → 31 comparison pages → 14 category pages → 5 persona pages → 3 stack pages = 93+ pages. Building each as a standalone HTML file is not sustainable. With Eleventy, adding a new tool page means creating one JSON file and one Markdown file. The HTML is generated automatically.

**Eleventy solves all three problems.** It is a static site generator that: (1) bakes JSON data into HTML at build time — no client-side JavaScript needed, Google sees the full content immediately, (2) uses templates and layouts so shared components (nav, footer, head) are defined once and applied everywhere, (3) generates pages automatically from data files — add a JSON file, get a page.

**The output is still pure static HTML.** Netlify deploys it identically to the current site. No server, no database, no runtime dependencies. The only change is that the HTML is now generated from templates rather than written by hand.

---

## What Eleventy Is (Plain English)

Eleventy sits between your content files and your final HTML. You write:
- A template file (the page structure, written once)
- A data file (the tool's scores, prices, quotes — in JSON)

Eleventy combines them and outputs a finished HTML file. You never write the same HTML twice.

```
data/tools/clay.json  ──┐
                         ├──► Eleventy ──► tools/clay-review.html (final HTML)
_templates/tool.njk  ──┘
```

The final HTML that Eleventy outputs is identical to what a human would write by hand — it's just generated automatically. Google sees the same HTML either way.

---

## The Migration Plan

### Session 1 — Setup and Proof of Concept (90 min)

**Goal:** Get Eleventy installed, prove it can generate one tool page from a template + JSON, and verify the output is identical to the current hand-written HTML.

**Steps:**
1. Install Eleventy: `npm install @11ty/eleventy`
2. Create `.eleventy.js` config file
3. Create the directory structure:
   ```
   _data/tools/         ← JSON data files (one per tool)
   _layouts/            ← Base HTML layouts (head, nav, footer)
   _templates/          ← Page templates (tool, comparison, category)
   _includes/           ← Reusable components (journey bar, score strip, evidence drawer)
   ```
4. Move `clay.json` to `_data/tools/clay.json`
5. Create `_layouts/base.njk` — the shared HTML shell (doctype, head, nav, footer)
6. Create `_templates/tool.njk` — the tool page template
7. Run `eleventy --serve` and verify the Clay page renders correctly
8. Compare the Eleventy output against the current `tools/clay-review.html` — they must be identical

**Deliverable:** One working tool page generated by Eleventy. Matt reviews and approves before Session 2 begins.

### Session 2 — Migrate All 10 Existing Tool Pages (90 min)

**Goal:** Convert all 10 existing tool pages to use the Eleventy template. No design changes — identical output.

**Steps:**
1. Create JSON data files for all 10 tools in `_data/tools/` (extracting data from existing HTML)
2. Verify the tool template generates all 10 pages correctly
3. Delete the old hand-written `tools/*.html` files (Eleventy generates them now)
4. Run `eleventy --build` and verify all 10 pages are in the output

**Deliverable:** All 10 tool pages generated by Eleventy. Output is visually identical to current site.

### Session 3 — Migrate Comparison and Category Pages (90 min)

**Goal:** Create templates for comparison pages and category pages. Migrate all existing pages.

**Steps:**
1. Create `_templates/comparison.njk` — the comparison page template
2. Create `_data/comparisons/` directory with JSON for each comparison page
3. Create `_templates/category.njk` — the category page template
4. Create `_data/categories/` directory with JSON for each category page
5. Migrate `index.html`, `about.html`, `disclosure.html`, `404.html` to Eleventy layouts
6. Run full build and verify all pages render correctly

**Deliverable:** Full site generated by Eleventy. All pages accounted for.

### Session 4 — Update Netlify Deploy and Verify (60 min)

**Goal:** Update the Netlify deploy configuration to run the Eleventy build step, verify the live site is identical to the current site, and set up the branch strategy.

**Steps:**
1. Update `netlify.toml` (or create it):
   ```toml
   [build]
     command = "npx @11ty/eleventy"
     publish = "_site"
   ```
2. Update `.github/workflows/deploy.yml` to run `npm install && npx @11ty/eleventy` before deploying
3. Create branch strategy: `main` is protected, all Claude Code work happens on `brief/[id]` branches, merges to main only after Manus validation
4. Push to a staging branch, verify Netlify preview deploy looks correct
5. Matt approves → merge to main → live site updates

**Deliverable:** Live site running on Eleventy. Deploy pipeline updated. Branch strategy in place.

---

## The Branch Strategy (Non-Negotiable)

Before any Phase 0 work begins, Claude Code must set up this branch structure:

```
main                    ← protected, always deployable, always validated
├── staging             ← integration branch, Manus validates here before merging to main
└── brief/[id]          ← one branch per brief, e.g. brief/0.1, brief/0.2
```

**The rule:** Claude Code never commits directly to `main`. Every brief gets its own branch. Manus validates the branch. Matt approves. Then it merges to `staging`, then to `main`.

This means a bad Claude Code session can never break the live site. Rollback is `git revert` on the branch — it never touches main.

**How to set this up (tell Claude Code):**
```bash
git checkout -b staging
git push origin staging
# In GitHub: Settings → Branches → Add rule → main → Require pull request before merging
```

---

## What Changes After Eleventy Is Set Up

Every subsequent brief becomes simpler and faster:

| Task | Before Eleventy | After Eleventy |
|---|---|---|
| Add a new tool page | Write 400+ lines of HTML | Create one JSON file |
| Update navigation across all pages | Find-and-replace in 60+ files | Edit one line in `_layouts/base.njk` |
| Change the score strip design | Edit 10 tool pages | Edit one component in `_includes/score-strip.njk` |
| Add a new section to all tool pages | Edit 10 files | Edit one template |
| Verify data is in the HTML for Google | Check each page | It's always in the HTML — baked at build time |

The Eleventy migration is the highest-leverage thing Claude Code can do. It makes every subsequent session 3–5x faster and eliminates the SEO data accuracy risk entirely.

---

## Updated Phase 0 Sequence

The sequence is now:

| Order | Brief | What It Does | Time |
|---|---|---|---|
| **STEP 0** | **Eleventy Migration** | **Installs the foundation everything else runs on** | **1 day** |
| 0.5 | JSON Schema | Creates the data schema (now goes into `_data/tools/`) | 60 min |
| 0.1 | How We Score page | Creates the credibility anchor page | 45 min |
| 0.2 | Journey Bar | Adds tab nav to tool template (one edit, all pages get it) | 20 min |
| 0.3 | Evidence Drawer | Standardizes evidence component in `_includes/` | 20 min |
| 0.4 | Score Strip | Standardizes score display in `_includes/` | 20 min |
| 0.6 | Navigation Update | Edits one line in `_layouts/base.njk` | 10 min |

Notice how Briefs 0.2–0.6 become dramatically faster after Eleventy is in place. What was 45 minutes of find-and-replace across 60 files becomes a 10-minute edit to one file.

---

## What Matt Needs to Do Before This Brief

**Nothing.** This brief has no external dependencies. Claude Code can start it immediately.

The only decision to make is: **do you want to review the Eleventy output after Session 1 before Sessions 2–4 proceed?** I recommend yes — Session 1 is the proof of concept, and if something looks wrong, it's better to catch it before migrating all 60+ pages.

---

## How to Start Claude Code

```
Read CLAUDE.md, MANUS_CONTEXT.md, and MASTER-ARCHITECTURE.md first.

Today's task is Brief STEP-0 from brief-STEP0-eleventy-migration.md.
This is a 4-session migration. Start with Session 1 only.

Session 1 goal: Install Eleventy, create the directory structure, 
migrate clay-review.html to use a template + JSON data file, 
verify the output is visually identical to the current page.

Do not migrate any other pages yet. When Session 1 is complete:
1. List every file you created or changed
2. Run `npx @11ty/eleventy --serve` and confirm it starts without errors
3. Paste the URL of the locally served Clay page so Matt can review it

Wait for Matt's approval before starting Session 2.
```

---

## Risk Mitigation

**Risk: Eleventy output differs from current HTML (broken styles, missing content)**  
Mitigation: Session 1 is a proof of concept on one page only. If it doesn't match, we debug before touching any other pages.

**Risk: Netlify deploy breaks after migration**  
Mitigation: Session 4 deploys to a staging branch first. The current `main` branch is untouched until Matt approves the staging preview.

**Risk: Claude Code introduces bugs during the migration**  
Mitigation: Branch strategy means bugs never reach `main`. Rollback is trivial.

**Risk: Migration takes longer than estimated**  
Mitigation: Each session is independent. If Session 2 takes longer, Sessions 3 and 4 are unaffected. The site stays live on the current code until the migration is complete and approved.

---

*This brief supersedes the data layer section of `MASTER-ARCHITECTURE.md`. The JavaScript client-side data-loading approach described there is replaced by this Eleventy build-time approach. All other architecture decisions remain unchanged.*
